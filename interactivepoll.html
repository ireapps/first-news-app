
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Interactive Poll &mdash; Build your first news app with Django 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/flasky.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Build your first news app with Django 0.1 documentation" href="index.html" />
    <link rel="prev" title="Installing Bitnami for Windows" href="gettingstartedwindows.html" />
   
  
  <link media="only screen and (max-device-width: 480px)" href="_static/small_flask.css" type= "text/css" rel="stylesheet" />

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="gettingstartedwindows.html" title="Installing Bitnami for Windows"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Build your first news app with Django 0.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="interactive-poll">
<h1>Interactive Poll<a class="headerlink" href="#interactive-poll" title="Permalink to this headline">¶</a></h1>
<p>A step-by-step guide for building an interactive poll. Based on
an application designed by <a class="reference external" href="http://twitter.com/pilhofer">Aron Pilhofer</a>, it has been adapted here by <a class="reference external" href="http://palewire.com/who-is-ben-welsh/">Ben Welsh</a>.</p>
<img alt="_images/interactivepoll.png" src="_images/interactivepoll.png" />
<p>To see a working demonstration of what you&#8217;ll be building, visit <a class="reference external" href="http://palewire.com/nicar/polls/1/">http://palewire.com/nicar/polls/1/</a></p>
<div class="section" id="prelude-hello-django">
<h2>Prelude: Hello Django<a class="headerlink" href="#prelude-hello-django" title="Permalink to this headline">¶</a></h2>
<p>Before you you can begin work, you need to get your Django environment up and flying. If you havn&#8217;t
done it already, follow one of our <a class="reference internal" href="index.html#gettingstarted"><em>getting started guides</em></a>.</p>
<p>If you elected to install Bitnami for Windows, you&#8217;ll need to fire it up by clicking &#8220;Use Bitnami DjangoStack&#8221;
in the start menu. That should bring up a terminal where you can being work.</p>
<img alt="_images/bootingbitnamiwindows.png" src="_images/bootingbitnamiwindows.png" />
</div>
<div class="section" id="act-1-hello-database">
<h2>Act 1: Hello Database<a class="headerlink" href="#act-1-hello-database" title="Permalink to this headline">¶</a></h2>
<p>First, create your Django project</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>django-admin.py startproject interactive_poll
</pre></div>
</div>
<p>Jump and start it up for the first time</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd </span>interactive_poll
<span class="nv">$ </span>python manage.py runserver
</pre></div>
</div>
<p>If you visit <a class="reference external" href="http://localhost:8000">http://localhost:8000</a> in your browser, you should see Django&#8217;s &#8220;Hello World&#8221; page,
indicating that you&#8217;ve got everything properly configured and are ready to begin work.</p>
<p>Then you start in on your app by first settings your database connection. For this app,
we&#8217;ll be creating a Sqlite database.</p>
<p>In your settings.py file, replace the default database configuration with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s">&#39;django.db.backends.sqlite3&#39;</span><span class="p">,</span>
        <span class="s">&#39;NAME&#39;</span><span class="p">:</span> <span class="s">&#39;database.db&#39;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Then back in your shell run the following command to create your database. When it asks, be sure to create a superuser. We&#8217;ll need it later.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>python manage.py syncdb
</pre></div>
</div>
<p>Now we will create an &#8220;application&#8221;, Django slang for a package of code. We&#8217;ll call it &#8220;polls.&#8221;</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>python manage.py startapp polls
</pre></div>
</div>
<p>You&#8217;ll now find a folder called &#8220;polls&#8221; where we&#8217;ll be building our app. The models file is where we define our database tables.
Go in there and add the following to the models.py file, which will act as the blueprint for two new tables.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Project</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
    <span class="n">pub_date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="s">&#39;date published&#39;</span><span class="p">)</span>
    <span class="n">active_flag</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span>

    <span class="nd">@models.permalink</span>
    <span class="k">def</span> <span class="nf">get_absolute_url</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="s">&#39;detail&#39;</span><span class="p">,</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">pk</span><span class="p">])</span>

<span class="k">class</span> <span class="nc">Vote</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">project</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">Project</span><span class="p">)</span>
    <span class="n">choice</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">IntegerField</span><span class="p">()</span>
</pre></div>
</div>
<p>Now return do the settings.py file and add a line to the INSTALLED_APPS list with the name of our new app.</p>
<div class="highlight-python"><div class="highlight"><pre> <span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">(</span>
     <span class="s">&#39;django.contrib.auth&#39;</span><span class="p">,</span>
     <span class="s">&#39;django.contrib.contenttypes&#39;</span><span class="p">,</span>
     <span class="s">&#39;django.contrib.sessions&#39;</span><span class="p">,</span>
     <span class="s">&#39;django.contrib.sites&#39;</span><span class="p">,</span>
     <span class="s">&#39;django.contrib.messages&#39;</span><span class="p">,</span>
     <span class="s">&#39;django.contrib.staticfiles&#39;</span><span class="p">,</span>
     <span class="c"># Uncomment the next line to enable the admin:</span>
     <span class="c"># &#39;django.contrib.admin&#39;,</span>
     <span class="c"># Uncomment the next line to enable admin documentation:</span>
     <span class="c"># &#39;django.contrib.admindocs&#39;,</span>
<span class="hll">     <span class="s">&#39;polls&#39;</span><span class="p">,</span>
</span> <span class="p">)</span>
</pre></div>
</div>
<p>Sync your database again and your new tables will be created in the database.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>python manage.py syncdb
</pre></div>
</div>
</div>
<div class="section" id="act-2-hello-admin">
<h2>Act 2: Hello Admin<a class="headerlink" href="#act-2-hello-admin" title="Permalink to this headline">¶</a></h2>
<p>Jump back into models.py and add a string representation of your object to the model Project.</p>
<div class="highlight-python"><div class="highlight"><pre> <span class="k">class</span> <span class="nc">Project</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
     <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
     <span class="n">pub_date</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">DateTimeField</span><span class="p">(</span><span class="s">&#39;date published&#39;</span><span class="p">)</span>
     <span class="n">active_flag</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">BooleanField</span><span class="p">()</span>

<span class="hll">     <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class="hll">         <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span>
</span></pre></div>
</div>
<p>Go back into settings.py and set ADMIN_MEDIA_PREFIX if it isn&#8217;t set to this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">ADMIN_MEDIA_PREFIX</span> <span class="o">=</span> <span class="s">&#39;/static/admin/&#39;</span>
</pre></div>
</div>
<p>Uncomment &#8220;django.contrib.admin&#8221; in INSTALLED_APPS</p>
<div class="highlight-python"><div class="highlight"><pre> <span class="n">INSTALLED_APPS</span> <span class="o">=</span> <span class="p">(</span>
     <span class="s">&#39;django.contrib.auth&#39;</span><span class="p">,</span>
     <span class="s">&#39;django.contrib.contenttypes&#39;</span><span class="p">,</span>
     <span class="s">&#39;django.contrib.sessions&#39;</span><span class="p">,</span>
     <span class="s">&#39;django.contrib.sites&#39;</span><span class="p">,</span>
     <span class="s">&#39;django.contrib.messages&#39;</span><span class="p">,</span>
     <span class="s">&#39;django.contrib.staticfiles&#39;</span><span class="p">,</span>
     <span class="c"># Uncomment the next line to enable the admin:</span>
<span class="hll">     <span class="s">&#39;django.contrib.admin&#39;</span><span class="p">,</span>
</span>     <span class="c"># Uncomment the next line to enable admin documentation:</span>
     <span class="c"># &#39;django.contrib.admindocs&#39;,</span>
     <span class="s">&#39;polls&#39;</span><span class="p">,</span>
 <span class="p">)</span>
</pre></div>
</div>
<p>Sync the database to create the admin&#8217;s set of tables.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>python manage.py syncdb
</pre></div>
</div>
<p>Now go into the urls.py file and uncomment the lines related to the admin, look like so</p>
<div class="highlight-python"><div class="highlight"><pre> <span class="kn">from</span> <span class="nn">django.conf.urls.defaults</span> <span class="kn">import</span> <span class="n">patterns</span><span class="p">,</span> <span class="n">include</span><span class="p">,</span> <span class="n">url</span>

 <span class="c"># Uncomment the next two lines to enable the admin:</span>
<span class="hll"> <span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
</span><span class="hll"> <span class="n">admin</span><span class="o">.</span><span class="n">autodiscover</span><span class="p">()</span>
</span>
 <span class="n">urlpatterns</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span>
     <span class="c"># Examples:</span>
     <span class="c"># url(r&#39;^$&#39;, &#39;interactive_poll.views.home&#39;, name=&#39;home&#39;),</span>
     <span class="c"># url(r&#39;^interactive_poll/&#39;, include(&#39;interactive_poll.foo.urls&#39;)),</span>

     <span class="c"># Uncomment the admin/doc line below to enable admin documentation:</span>
     <span class="c"># url(r&#39;^admin/doc/&#39;, include(&#39;django.contrib.admindocs.urls&#39;)),</span>

     <span class="c"># Uncomment the next line to enable the admin:</span>
<span class="hll">     <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^admin/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">)),</span>
</span> <span class="p">)</span>
</pre></div>
</div>
<p>Now fire up the runserver,</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>python manage.py runserver
</pre></div>
</div>
<p>And now log in at <a class="reference external" href="http://localhost:8000/admin/">http://localhost:8000/admin/</a>, where you&#8217;ll see Django&#8217;s generic administration
system. But you&#8217;ll notice that your app&#8217;s database tables aren&#8217;t in there.</p>
<p>To add them, create a file called admin.py in the &#8220;polls&#8221; folder and add the following.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">polls.models</span> <span class="kn">import</span> <span class="n">Project</span><span class="p">,</span> <span class="n">Vote</span>
<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>

<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Project</span><span class="p">)</span>
<span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Vote</span><span class="p">)</span>
</pre></div>
</div>
<p>Now, if you visit <a class="reference external" href="http://localhost:8000/admin/">http://localhost:8000/admin/</a> again you should find administration panels
for entering data into the poll&#8217;s database tables.</p>
<p>For the purposes of this demonstration, I created a poll Project with the title
&#8220;Python is the best programming language&#8221;. When we finish our site, users will be able
vote up or down my claim. Feel free to insert your own title, but drop one or two in there, and check
the active flag, so we have something to work with.</p>
</div>
<div class="section" id="act-3-hello-internets">
<h2>Act 3: Hello Internets<a class="headerlink" href="#act-3-hello-internets" title="Permalink to this headline">¶</a></h2>
<p>First add the following to the top of your settings.py file.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span>
<span class="n">settings_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">__file__</span><span class="p">)</span>
</pre></div>
</div>
<p>And change the TEMPLATE_DIRS variable.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">TEMPLATE_DIRS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">settings_dir</span><span class="p">,</span> <span class="s">&#39;templates&#39;</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Then replace all of urls.py file with the following.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.conf.urls.defaults</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">django.contrib</span> <span class="kn">import</span> <span class="n">admin</span>
<span class="n">admin</span><span class="o">.</span><span class="n">autodiscover</span><span class="p">()</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="n">patterns</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span>
    <span class="p">(</span><span class="s">r&#39;^admin/&#39;</span><span class="p">,</span> <span class="n">include</span><span class="p">(</span><span class="n">admin</span><span class="o">.</span><span class="n">site</span><span class="o">.</span><span class="n">urls</span><span class="p">)),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^$&#39;</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="s">&#39;polls.views.index&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;polls_index&#39;</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^polls/(?P&lt;poll_id&gt;\d+)/$&#39;</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="s">&#39;polls.views.detail&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;polls_detail&#39;</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^polls/(?P&lt;poll_id&gt;\d+)/vote/$&#39;</span><span class="p">,</span> <span class="n">view</span><span class="o">=</span><span class="s">&#39;polls.views.vote&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">&#39;polls_vote&#39;</span><span class="p">),</span>
    <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^local-media/(?P&lt;path&gt;.*)$&#39;</span><span class="p">,</span> <span class="s">&#39;django.views.static.serve&#39;</span><span class="p">,</span> <span class="p">{</span>
        <span class="s">&#39;document_root&#39;</span><span class="p">:</span> <span class="n">settings</span><span class="o">.</span><span class="n">MEDIA_ROOT</span><span class="p">,</span> <span class="s">&#39;show_indexes&#39;</span><span class="p">:</span> <span class="bp">True</span>
    <span class="p">}),</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Open up views.py in the polls folder and all all of the following.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.db.models</span> <span class="kn">import</span> <span class="n">Sum</span>
<span class="kn">from</span> <span class="nn">polls.models</span> <span class="kn">import</span> <span class="n">Project</span><span class="p">,</span> <span class="n">Vote</span>
<span class="kn">from</span> <span class="nn">django.views.decorators.csrf</span> <span class="kn">import</span> <span class="n">csrf_exempt</span>
<span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">get_object_or_404</span><span class="p">,</span> <span class="n">render</span>
<span class="kn">from</span> <span class="nn">django.http</span> <span class="kn">import</span> <span class="n">HttpResponseRedirect</span><span class="p">,</span> <span class="n">HttpResponse</span>

<span class="k">def</span> <span class="nf">index</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">projects</span> <span class="o">=</span> <span class="n">Project</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s">&#39;-pub_date&#39;</span><span class="p">)[:</span><span class="mi">5</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">&#39;index.html&#39;</span><span class="p">,</span> <span class="p">{</span>
        <span class="s">&#39;projects&#39;</span><span class="p">:</span> <span class="n">projects</span>
    <span class="p">})</span>

<span class="k">def</span> <span class="nf">detail</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">poll_id</span><span class="p">):</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">Project</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">poll_id</span><span class="p">)</span>
    <span class="n">total</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">vote_set</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span><span class="n">Sum</span><span class="p">(</span><span class="s">&#39;choice&#39;</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">&#39;detail.html&#39;</span><span class="p">,</span> <span class="p">{</span>
        <span class="s">&#39;project&#39;</span><span class="p">:</span> <span class="n">p</span><span class="p">,</span>
        <span class="s">&#39;total&#39;</span><span class="p">:</span> <span class="n">total</span><span class="p">[</span><span class="s">&#39;choice__sum&#39;</span><span class="p">],</span>
        <span class="s">&#39;request&#39;</span><span class="p">:</span> <span class="n">request</span><span class="p">,</span>
    <span class="p">})</span>

<span class="nd">@csrf_exempt</span>
<span class="k">def</span> <span class="nf">vote</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="n">poll_id</span><span class="p">):</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">get_object_or_404</span><span class="p">(</span><span class="n">Project</span><span class="p">,</span> <span class="n">pk</span><span class="o">=</span><span class="n">poll_id</span><span class="p">)</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;data&quot;</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">405</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">data</span> <span class="o">==</span> <span class="s">&quot;-1&quot;</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">v</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">vote_set</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">choice</span><span class="o">=</span><span class="n">value</span><span class="p">)</span>
    <span class="n">v</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</pre></div>
</div>
<p>Create a &#8220;templates&#8221; folder in the base of your project and create an index.html file in there. Add the following.</p>
<div class="highlight-html+django"><div class="highlight"><pre><span class="nt">&lt;ul&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">project</span> <span class="k">in</span> <span class="nv">projects</span> <span class="cp">%}</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">project.get_absolute_url</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">project.title</span> <span class="cp">}}</span><span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="cp">{%</span> <span class="k">empty</span> <span class="cp">%}</span>
    <span class="nt">&lt;p&gt;</span>No projects are available.<span class="nt">&lt;/p&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="nt">&lt;/ul&gt;</span>
</pre></div>
</div>
<p>Add a detail.html template where it all comes together.</p>
<div class="highlight-html+django"><div class="highlight"><pre><span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span> <span class="na">src=</span><span class="s">&quot;https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
    <span class="nt">&lt;style </span><span class="na">type=</span><span class="s">&quot;text/css&quot;</span><span class="nt">&gt;</span>
        <span class="nt">h3</span> <span class="p">{</span><span class="k">margin-bottom</span><span class="o">:</span><span class="m">40px</span><span class="p">;}</span>
        <span class="nc">.button</span> <span class="p">{</span> <span class="k">display</span><span class="o">:</span><span class="k">inline</span><span class="p">;</span> <span class="k">background-color</span><span class="o">:</span> <span class="nb">black</span><span class="p">;</span> <span class="k">color</span><span class="o">:</span><span class="nb">white</span><span class="p">;</span> <span class="k">padding</span><span class="o">:</span><span class="m">7px</span><span class="p">;</span> <span class="k">margin</span><span class="o">:</span> <span class="m">0</span> <span class="m">15px</span><span class="p">;</span> <span class="k">cursor</span><span class="o">:</span><span class="k">pointer</span><span class="p">;</span> <span class="p">}</span>
        <span class="nc">.button</span><span class="nd">:hover</span> <span class="p">{</span> <span class="k">background-color</span><span class="o">:</span><span class="m">#CCC</span><span class="p">;</span> <span class="p">}</span>
    <span class="nt">&lt;/style&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">align=</span><span class="s">&quot;center&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;h1</span> <span class="na">id=</span><span class="s">&quot;title&quot;</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">project</span> <span class="cp">}}</span><span class="nt">&lt;/h1&gt;</span>
        <span class="nt">&lt;h3</span> <span class="na">id=</span><span class="s">&quot;total&quot;</span><span class="nt">&gt;</span>Total: <span class="cp">{{</span> <span class="nv">total</span><span class="o">|</span><span class="nf">default_if_none</span><span class="o">:</span><span class="m">0</span> <span class="cp">}}</span><span class="nt">&lt;/h3&gt;</span>
        <span class="nt">&lt;div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;yes&quot;</span> <span class="na">class=</span><span class="s">&quot;button&quot;</span><span class="nt">&gt;</span>YES<span class="nt">&lt;/div&gt;</span>
            <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;no&quot;</span> <span class="na">class=</span><span class="s">&quot;button&quot;</span><span class="nt">&gt;</span>NO<span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
        <span class="kd">var</span> <span class="nx">currentTotal</span> <span class="o">=</span> <span class="cp">{{</span> <span class="nv">total</span><span class="o">|</span><span class="nf">default_if_none</span><span class="o">:</span><span class="m">0</span> <span class="cp">}}</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">vote</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
              <span class="nx">type</span><span class="o">:</span> <span class="s1">&#39;POST&#39;</span><span class="p">,</span>
              <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;http://</span><span class="cp">{{</span> <span class="nv">request.get_host</span> <span class="cp">}}</span><span class="s1">/polls/</span><span class="cp">{{</span> <span class="nv">project.id</span> <span class="cp">}}</span><span class="s1">/vote/&#39;</span><span class="p">,</span>
              <span class="nx">data</span><span class="o">:</span> <span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="o">:</span> <span class="nx">data</span><span class="p">}</span>
            <span class="p">});</span>
            <span class="nx">currentTotal</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">;</span>
            <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#total&quot;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s2">&quot;Total: &quot;</span> <span class="o">+</span> <span class="nx">currentTotal</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
        <span class="p">};</span>
        <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#yes&quot;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">vote</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
        <span class="p">});</span>
        <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#no&quot;</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
            <span class="nx">vote</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<p>Now fire up the runserver and watch it fly in your browser at <a class="reference external" href="http://localhost:8000">http://localhost:8000</a>.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>python manage.py runserver
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <a href="index.html" style="border:none;">
      <img id="logo" src="_static/logo.png">
  </a>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Interactive Poll</a><ul>
<li><a class="reference internal" href="#prelude-hello-django">Prelude: Hello Django</a></li>
<li><a class="reference internal" href="#act-1-hello-database">Act 1: Hello Database</a></li>
<li><a class="reference internal" href="#act-2-hello-admin">Act 2: Hello Admin</a></li>
<li><a class="reference internal" href="#act-3-hello-internets">Act 3: Hello Internets</a></li>
</ul>
</li>
</ul>
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="gettingstartedwindows.html" title="previous chapter">Installing Bitnami for Windows</a></li>
  </ul></li>
</ul>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/interactivepoll.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy; Copyright 2011, Investigative Reporters and Editors, Inc..
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
    </div>
  </body>
</html>